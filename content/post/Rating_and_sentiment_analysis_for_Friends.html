---
title: "Rating and sentiment analysis for Friends"
date: '2019-05-28'
output:
  word_document: default
  html_document:
    df_print: paged
header:
  caption: ''
  image: ''
editor_options:
  chunk_output_type: console
slug: Rating and sentiment analysis for Friends
tags: []
categories: []
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotly-main/plotly-latest.min.js"></script>


<p>The other day Netflix suggested me to watch the TV show Friends. As I really enjoyed watching it as kid, I figured it would be nice to watch it again. However, this time, first I wanted to do some text and rating analyses to the show :)</p>
<p>We can start by loading the required packages:</p>
<pre class="r"><code>library(tidyverse)
library(tidytext)
library(skimr)</code></pre>
<pre><code>## 
## Attaching package: &#39;skimr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     filter</code></pre>
<p>I also used functions from these packages:</p>
<pre class="r"><code>packages &lt;- c(&quot;ggrepel&quot;, &quot;stringi&quot;, &quot;grid&quot;, &quot;varhandle&quot;,
             &quot;plotly&quot;, &quot;scales&quot;, &quot;viridis&quot;)      
if (length(setdiff(packages, rownames(installed.packages()))) &gt; 0) {
  install.packages(setdiff(packages, rownames(installed.packages())))  
}</code></pre>
<p>In addition, in order to get the IMDB ratings we need to also install/load <a href="https://github.com/RMHogervorst/imdb">this</a> package. However, if you’re only interested in the data, I uploaded it to my GitHub repository <a href="https://github.com/AmirDJV/AmirDJV.github.io/blob/master/content/post/Rating_and_sentiment_analysis_for_Friends/imdb.rds">here</a>.</p>
<pre class="r"><code>#Load imdb package, install if not loaded
if (require(imdb) == 0) {devtools::install_github(&quot;rmhogervorst/imdb&quot;)}</code></pre>
<pre><code>## Loading required package: imdb</code></pre>
<p>We’ll start by getting the IMDB data for the series. This can be done nicely using the <code>imdb</code> wrapper package for open IMDB.</p>
<pre class="r"><code>add_key_to_renviron(&quot;you API key here&quot;)

imdb &lt;- tbl_df(c(1:10)) %&gt;%
  mutate(data = map(value, function(x) {
    imdbSeries(&quot;friends&quot;, seasons = x)
  }))

# We&#39;ll save the data, so we won&#39;t abuse the website
saveRDS(imdb, &quot;imdb.rds&quot;)</code></pre>
<p>Now, let’s load the IMDB data and do a quick look of what we have here.</p>
<pre class="r"><code>imdb &lt;- readRDS(&quot;Rating_and_sentiment_analysis_for_Friends/imdb.rds&quot;) %&gt;% 
  unnest(data) %&gt;% 
  select(title = Title, 
         season = Season, 
         episode = Episode, 
         rating = imdbRating) 

skimr::skim(imdb)</code></pre>
<pre><code>## Skim summary statistics
##  n obs: 238 
##  n variables: 4 
##  group variables:  
## 
## -- Variable type:character ----------------------------------
##  variable missing complete   n min max empty n_unique
##     title       0      238 238  17  50     0      238
## 
## -- Variable type:integer ------------------------------------
##  variable missing complete   n mean   sd p0 p25 p50 p75 p100     hist
##    season       0      238 238 5.42 2.83  1   3   5   8   10 &lt;U+2587&gt;&lt;U+2585&gt;&lt;U+2583&gt;&lt;U+2583&gt;&lt;U+2585&gt;&lt;U+2583&gt;&lt;U+2583&gt;&lt;U+2587&gt;
## 
## -- Variable type:numeric ------------------------------------
##  variable missing complete   n  mean   sd  p0  p25  p50  p75 p100     hist
##   episode       0      238 238 12.42 6.92 1   6.25 12   18   25   &lt;U+2587&gt;&lt;U+2586&gt;&lt;U+2586&gt;&lt;U+2586&gt;&lt;U+2586&gt;&lt;U+2586&gt;&lt;U+2586&gt;&lt;U+2583&gt;
##    rating       0      238 238  8.52 0.37 7.3 8.3   8.5  8.7  9.7 &lt;U+2581&gt;&lt;U+2581&gt;&lt;U+2585&gt;&lt;U+2587&gt;&lt;U+2585&gt;&lt;U+2585&gt;&lt;U+2581&gt;&lt;U+2581&gt;</code></pre>
<p>We can see that we have 238 episodes, the average rating was 8.52 with a standard deviation of 0.37, and the median was 8.5.</p>
<p>We can also do a quick box-plot to see what were the ratings for each season. We can also mark which episodes were outliers.</p>
<pre class="r"><code>imdb %&gt;% 
  group_by(season) %&gt;%
  mutate(outlier = ifelse(
    rating &lt; quantile(rating, 0.25) - 1.5 * IQR(rating) |
      rating &gt; quantile(rating, 0.75) + 1.5 * IQR(rating), 
    stringi::stri_trans_totitle(
        gsub(&quot;The One with|The One Where&quot;, &quot;&quot;, title)),
    NA)) %&gt;% 
  ggplot(aes(factor(season), rating)) + 
  geom_boxplot() +
  scale_y_continuous(breaks = seq(7, 10, 0.5),
                     limits = c(7, 10)) + 
  labs(title = &quot;IMDB Ratings by Season&quot;, 
       x = &quot;Season&quot;, 
       y = &quot;Rating&quot;) +
  guides(color=FALSE) +
  theme_classic() +
  theme(plot.title = element_text(hjust = 0.5)) +
  ggrepel::geom_text_repel(aes(label = outlier),
                           na.rm = TRUE)</code></pre>
<p><img src="/post/Rating_and_sentiment_analysis_for_Friends_files/figure-html/unnamed-chunk-7-1.png" width="672" /> It seems that overall, the series kept for most of its episodes the same rating. If we’ll look at the median (the black line inside the boxes) rating, it seems somewhat stable. However, we can see that some episodes had really high and low ratings. Being familiar with show, some of these extreme ratings makes sense to me. For example, the episode were Ross wanted to take Rachel to her and Monica’s prom (The prom video, season 2), or the episode “Christmas In Tulsa” (season 9) which was basically flashbacks from old episodes.</p>
<p>We can also use heat-map to look for patterns between the episodes’ rating across the different seasons.</p>
<pre class="r"><code>imdb %&gt;% 
  ggplot(aes(episode, season, fill = rating)) + 
  geom_tile(colour = &quot;white&quot;, size = 0.2)+
  labs(x = &quot;Episode&quot;, 
       y = &quot;Season&quot;,
       fill = &quot;Rating&quot;,
       title = &quot;IMDB Rating Scores Across Episdoes By Seasons&quot;) +
  scale_x_continuous(expand = c(0,0), breaks = seq(1, 25, 1)) +
  scale_y_continuous(expand = c(0,0), breaks = seq(1, 10, 1)) +
  scale_fill_continuous(type = &quot;viridis&quot;) +
  theme_grey(base_size = 10) +
  theme(plot.title = element_text(hjust = 0.5),
        legend.margin=margin(grid::unit(0,&quot;cm&quot;)),
        legend.key.height=grid::unit(0.8,&quot;cm&quot;),
        legend.key.width=grid::unit(0.2,&quot;cm&quot;))</code></pre>
<p><img src="/post/Rating_and_sentiment_analysis_for_Friends_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Now, let’s load the transcript, filter for the main characters, do some cleaning, make it tidy and remove some stop words.</p>
<p>You can find the transcripts file <a href="https://github.com/AmirDJV/AmirDJV.github.io/blob/master/content/post/Rating_and_sentiment_analysis_for_Friends/friends.csv">here</a>.</p>
<pre class="r"><code>scripts &lt;- read.csv(&quot;Rating_and_sentiment_analysis_for_Friends/friends.csv&quot;)

scripts &lt;- scripts %&gt;% 
  purrr::set_names(tolower(names(scripts))) %&gt;%
  select(season, episode, title,
         actor = author,
         text = quote) %&gt;% 
  varhandle::unfactor() %&gt;% 
  filter(actor == &quot;Rachel&quot; | 
           actor == &quot;Monica&quot; |
           actor == &quot;Joey&quot; | 
           actor == &quot;Chandler&quot; |
           actor == &quot;Ross&quot; |
           actor == &quot;Phoebe&quot;) %&gt;% 
  mutate(
    episode = as.numeric(episode),
    text = gsub(&quot;\\s*\\([^\\)]+\\)|\\[.*?\\]&quot;,&quot;&quot;,
                text), 
    text = gsub(&quot;\\written.*&quot;, &quot;&quot;, text)) %&gt;%  
  tidytext::unnest_tokens(word, text) %&gt;%
  anti_join(stop_words, by = &quot;word&quot;) </code></pre>
<p>We can take a quick pick at the scripts:</p>
<pre class="r"><code>head(scripts)</code></pre>
<pre><code>##      season episode                                title    actor         word
## 1.7       1       1 The One Where Monica Gets A Roommate   Monica         guyi
## 2.6       1       1 The One Where Monica Gets A Roommate     Joey          guy
## 2.7       1       1 The One Where Monica Gets A Roommate     Joey there&#39;sgotta
## 2.10      1       1 The One Where Monica Gets A Roommate     Joey        wrong
## 3.2       1       1 The One Where Monica Gets A Roommate Chandler         joey
## 3.3       1       1 The One Where Monica Gets A Roommate Chandler       benice</code></pre>
<pre class="r"><code>summary(scripts)</code></pre>
<pre><code>##      season          episode         title              actor          
##  Min.   : 1.000   Min.   : 1.00   Length:155457      Length:155457     
##  1st Qu.: 3.000   1st Qu.: 6.00   Class :character   Class :character  
##  Median : 6.000   Median :12.00   Mode  :character   Mode  :character  
##  Mean   : 5.501   Mean   :12.27                                        
##  3rd Qu.: 8.000   3rd Qu.:18.00                                        
##  Max.   :10.000   Max.   :25.00                                        
##      word          
##  Length:155457     
##  Class :character  
##  Mode  :character  
##                    
##                    
## </code></pre>
<p>Let’s start with small things, like who spoke the most and what was the most occurring word for each character.</p>
<pre class="r"><code>scripts %&gt;% 
  group_by(actor) %&gt;% 
  summarise(numberOfWords = sum(!is.na(word)))</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 6 x 2
##   actor    numberOfWords
##   &lt;chr&gt;            &lt;int&gt;
## 1 Chandler         25385
## 2 Joey             26758
## 3 Monica           23895
## 4 Phoebe           23825
## 5 Rachel           27359
## 6 Ross             28235</code></pre>
<pre class="r"><code>scripts %&gt;% 
  group_by(actor) %&gt;% 
  count(word) %&gt;% 
  top_n(3)</code></pre>
<pre><code>## Selecting by n</code></pre>
<pre><code>## # A tibble: 18 x 3
## # Groups:   actor [6]
##    actor    word      n
##    &lt;chr&gt;    &lt;chr&gt; &lt;int&gt;
##  1 Chandler gonna   380
##  2 Chandler hey     519
##  3 Chandler yeah    558
##  4 Joey     hey    1095
##  5 Joey     uh      509
##  6 Joey     yeah    967
##  7 Monica   gonna   423
##  8 Monica   hey     414
##  9 Monica   yeah    407
## 10 Phoebe   gonna   337
## 11 Phoebe   hey     464
## 12 Phoebe   yeah    789
## 13 Rachel   gonna   526
## 14 Rachel   ross    525
## 15 Rachel   yeah    809
## 16 Ross     hey     769
## 17 Ross     uh      758
## 18 Ross     yeah    842</code></pre>
<p>Interestingly, one of the things that Rachel says the most is “Ross”. That made me wonder how much do they reference each other.</p>
<pre class="r"><code>plotly::ggplotly(
  scripts %&gt;% 
    filter(grepl(&quot;monica|rachel|joey|chandler|ross|phoebe&quot;,
                 tolower(word))) %&gt;% 
    mutate(reference = str_extract(
      pattern = &quot;monica|rachel|joey|chandler|ross|phoebe&quot;,
      string = tolower(word))) %&gt;%
    group_by(actor, reference) %&gt;% 
    summarise(Occurrence = sum(!is.na(reference))) %&gt;% 
    ungroup() %&gt;% 
    mutate(Actor = factor(
      x = stringi::stri_trans_totitle(actor), 
      levels = c(&quot;Monica&quot;, &quot;Rachel&quot;, &quot;Joey&quot;,
                 &quot;Chandler&quot;, &quot;Ross&quot;, &quot;Phoebe&quot;)), 
      Reference = factor(
        x = stringi::stri_trans_totitle(reference), 
        levels = c(&quot;Monica&quot;, &quot;Rachel&quot;, &quot;Joey&quot;,
                   &quot;Chandler&quot;, &quot;Ross&quot;, &quot;Phoebe&quot;))) %&gt;%
    ggplot(aes(Actor, Reference, fill = Occurrence)) + 
    geom_tile(colour = &quot;white&quot;, size = 0.2) +
    labs(x = &quot;Actor&quot;, 
         y = &quot;Reference&quot;,
         fill = &quot;Occurrences&quot;,
         title = &quot;How Much Friends Reference Each Other&quot;) +
    scale_x_discrete(expand = c(0,0)) +
    scale_y_discrete(expand = c(0,0)) +
    scale_fill_continuous(type = &quot;viridis&quot;) +
    theme_grey(base_size = 10) +
    theme(plot.title = element_text(hjust = 0.5),
          legend.margin=margin(grid::unit(0,&quot;cm&quot;)),
          legend.key.height=grid::unit(0.8,&quot;cm&quot;),
          legend.key.width=grid::unit(0.2,&quot;cm&quot;))
)</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;actor&#39; (override with `.groups` argument)</code></pre>
<p><div id="htmlwidget-1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":[{"x":[1,2,3,4,5,6],"y":[1,2,3,4,5,6],"z":[[0,0.330628803245436,0.13184584178499,0.292089249492901,0.164300202839757,0.237322515212982],[0.271805273833671,0.0162271805273834,0.125760649087221,0.0101419878296146,0.363083164300203,0.186612576064909],[0.356997971602434,0.559837728194726,0.0892494929006085,0.340770791075051,0.241379310344828,0.198782961460446],[0.468559837728195,0.174442190669371,0.316430020283976,0.00405679513184584,0.160243407707911,0.168356997971602],[0.318458417849899,1,0.586206896551724,0.249492900608519,0.0527383367139959,0.281947261663286],[0.391480730223124,0.304259634888438,0.0405679513184584,0.00202839756592292,0.0791075050709939,0.0324543610547667]],"text":[["Actor: Monica<br />Reference: Monica<br />Occurrence:  66","Actor: Rachel<br />Reference: Monica<br />Occurrence: 229","Actor: Joey<br />Reference: Monica<br />Occurrence: 131","Actor: Chandler<br />Reference: Monica<br />Occurrence: 210","Actor: Ross<br />Reference: Monica<br />Occurrence: 147","Actor: Phoebe<br />Reference: Monica<br />Occurrence: 183"],["Actor: Monica<br />Reference: Rachel<br />Occurrence: 200","Actor: Rachel<br />Reference: Rachel<br />Occurrence:  74","Actor: Joey<br />Reference: Rachel<br />Occurrence: 128","Actor: Chandler<br />Reference: Rachel<br />Occurrence:  71","Actor: Ross<br />Reference: Rachel<br />Occurrence: 245","Actor: Phoebe<br />Reference: Rachel<br />Occurrence: 158"],["Actor: Monica<br />Reference: Joey<br />Occurrence: 242","Actor: Rachel<br />Reference: Joey<br />Occurrence: 342","Actor: Joey<br />Reference: Joey<br />Occurrence: 110","Actor: Chandler<br />Reference: Joey<br />Occurrence: 234","Actor: Ross<br />Reference: Joey<br />Occurrence: 185","Actor: Phoebe<br />Reference: Joey<br />Occurrence: 164"],["Actor: Monica<br />Reference: Chandler<br />Occurrence: 297","Actor: Rachel<br />Reference: Chandler<br />Occurrence: 152","Actor: Joey<br />Reference: Chandler<br />Occurrence: 222","Actor: Chandler<br />Reference: Chandler<br />Occurrence:  68","Actor: Ross<br />Reference: Chandler<br />Occurrence: 145","Actor: Phoebe<br />Reference: Chandler<br />Occurrence: 149"],["Actor: Monica<br />Reference: Ross<br />Occurrence: 223","Actor: Rachel<br />Reference: Ross<br />Occurrence: 559","Actor: Joey<br />Reference: Ross<br />Occurrence: 355","Actor: Chandler<br />Reference: Ross<br />Occurrence: 189","Actor: Ross<br />Reference: Ross<br />Occurrence:  92","Actor: Phoebe<br />Reference: Ross<br />Occurrence: 205"],["Actor: Monica<br />Reference: Phoebe<br />Occurrence: 259","Actor: Rachel<br />Reference: Phoebe<br />Occurrence: 216","Actor: Joey<br />Reference: Phoebe<br />Occurrence:  86","Actor: Chandler<br />Reference: Phoebe<br />Occurrence:  67","Actor: Ross<br />Reference: Phoebe<br />Occurrence: 105","Actor: Phoebe<br />Reference: Phoebe<br />Occurrence:  82"]],"colorscale":[[0,"#440154"],[0.00202839756592292,"#440254"],[0.00405679513184584,"#440355"],[0.0101419878296146,"#440656"],[0.0162271805273834,"#450958"],[0.0324543610547667,"#45115C"],[0.0405679513184584,"#45145E"],[0.0527383367139959,"#451961"],[0.0791075050709939,"#462268"],[0.0892494929006085,"#46256A"],[0.125760649087221,"#452F74"],[0.13184584178499,"#453175"],[0.160243407707911,"#44397D"],[0.164300202839757,"#443A7E"],[0.168356997971602,"#433B7F"],[0.174442190669371,"#433D80"],[0.186612576064909,"#424083"],[0.198782961460446,"#414487"],[0.237322515212982,"#404E88"],[0.241379310344828,"#3F4F89"],[0.249492900608519,"#3F5189"],[0.271805273833671,"#3D578A"],[0.281947261663286,"#3D5A8A"],[0.292089249492901,"#3C5C8A"],[0.304259634888438,"#3A5F8B"],[0.316430020283976,"#39638B"],[0.318458417849899,"#39638B"],[0.330628803245436,"#37668C"],[0.340770791075051,"#36698C"],[0.356997971602434,"#336D8D"],[0.363083164300203,"#326F8D"],[0.391480730223124,"#2C768E"],[0.468559837728195,"#2C888B"],[0.559837728194726,"#279E86"],[0.586206896551724,"#24A585"],[1,"#FDE725"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1],"y":[1],"name":"99_3b73afbfd45cbbece10923a589244a63","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#440154"],[0.00334448160535118,"#440355"],[0.00668896321070236,"#440456"],[0.0100334448160535,"#440656"],[0.0133779264214047,"#450857"],[0.0167224080267559,"#450958"],[0.020066889632107,"#450B59"],[0.0234113712374582,"#450D5A"],[0.0267558528428094,"#450E5B"],[0.0301003344481605,"#45105B"],[0.0334448160535117,"#45115C"],[0.0367892976588629,"#45135D"],[0.040133779264214,"#45145E"],[0.0434782608695652,"#45155F"],[0.0468227424749164,"#451760"],[0.0501672240802676,"#451860"],[0.0535117056856187,"#451961"],[0.0568561872909699,"#461A62"],[0.0602006688963211,"#461B63"],[0.0635451505016722,"#461D64"],[0.0668896321070234,"#461E65"],[0.0702341137123746,"#461F65"],[0.0735785953177257,"#462066"],[0.0769230769230769,"#462167"],[0.0802675585284281,"#462268"],[0.0836120401337793,"#462369"],[0.0869565217391304,"#46246A"],[0.0903010033444816,"#46256B"],[0.0936454849498328,"#46266B"],[0.096989966555184,"#46276C"],[0.100334448160535,"#46286D"],[0.103678929765886,"#46296E"],[0.107023411371237,"#462A6F"],[0.110367892976589,"#452B70"],[0.11371237458194,"#452C70"],[0.117056856187291,"#452D71"],[0.120401337792642,"#452E72"],[0.123745819397993,"#452F73"],[0.127090301003344,"#453074"],[0.130434782608696,"#453175"],[0.133779264214047,"#453276"],[0.137123745819398,"#453377"],[0.140468227424749,"#453477"],[0.1438127090301,"#443578"],[0.147157190635451,"#443679"],[0.150501672240803,"#44367A"],[0.153846153846154,"#44377B"],[0.157190635451505,"#44387C"],[0.160535117056856,"#44397D"],[0.163879598662207,"#443A7D"],[0.167224080267559,"#433B7E"],[0.17056856187291,"#433C7F"],[0.173913043478261,"#433D80"],[0.177257525083612,"#433E81"],[0.180602006688963,"#433F82"],[0.183946488294314,"#424083"],[0.187290969899666,"#424184"],[0.190635451505017,"#424185"],[0.193979933110368,"#424285"],[0.197324414715719,"#414386"],[0.20066889632107,"#414487"],[0.204013377926421,"#414587"],[0.207357859531773,"#414687"],[0.210702341137124,"#414787"],[0.214046822742475,"#414888"],[0.217391304347826,"#404988"],[0.220735785953177,"#404A88"],[0.224080267558528,"#404A88"],[0.22742474916388,"#404B88"],[0.230769230769231,"#404C88"],[0.234113712374582,"#404D88"],[0.237458193979933,"#404E88"],[0.240802675585284,"#3F4F89"],[0.244147157190635,"#3F5089"],[0.247491638795987,"#3F5189"],[0.250836120401338,"#3F5289"],[0.254180602006689,"#3F5289"],[0.25752508361204,"#3E5389"],[0.260869565217391,"#3E5489"],[0.264214046822743,"#3E5589"],[0.267558528428094,"#3E568A"],[0.270903010033445,"#3D578A"],[0.274247491638796,"#3D588A"],[0.277591973244147,"#3D598A"],[0.280936454849498,"#3D598A"],[0.28428093645485,"#3C5A8A"],[0.287625418060201,"#3C5B8A"],[0.290969899665552,"#3C5C8A"],[0.294314381270903,"#3B5D8A"],[0.297658862876254,"#3B5E8B"],[0.301003344481605,"#3B5F8B"],[0.304347826086957,"#3A5F8B"],[0.307692307692308,"#3A608B"],[0.311036789297659,"#3A618B"],[0.31438127090301,"#39628B"],[0.317725752508361,"#39638B"],[0.321070234113712,"#38648B"],[0.324414715719064,"#38658C"],[0.327759197324415,"#38658C"],[0.331103678929766,"#37668C"],[0.334448160535117,"#37678C"],[0.337792642140468,"#36688C"],[0.341137123745819,"#36698C"],[0.344481605351171,"#356A8C"],[0.347826086956522,"#356B8C"],[0.351170568561873,"#346B8C"],[0.354515050167224,"#346C8D"],[0.357859531772575,"#336D8D"],[0.361204013377926,"#326E8D"],[0.364548494983278,"#326F8D"],[0.367892976588629,"#31708D"],[0.37123745819398,"#31718D"],[0.374581939799331,"#30718D"],[0.377926421404682,"#2F728D"],[0.381270903010033,"#2F738D"],[0.384615384615385,"#2E748E"],[0.387959866220736,"#2D758E"],[0.391304347826087,"#2C768E"],[0.394648829431438,"#2B778E"],[0.397993311036789,"#2B778E"],[0.40133779264214,"#2A788E"],[0.404682274247492,"#2A798E"],[0.408026755852843,"#2A7A8E"],[0.411371237458194,"#2B7B8E"],[0.414715719063545,"#2B7B8D"],[0.418060200668896,"#2B7C8D"],[0.421404682274248,"#2B7D8D"],[0.424749163879599,"#2B7E8D"],[0.42809364548495,"#2B7F8D"],[0.431438127090301,"#2B7F8D"],[0.434782608695652,"#2B808D"],[0.438127090301003,"#2B818C"],[0.441471571906355,"#2B828C"],[0.444816053511706,"#2B838C"],[0.448160535117057,"#2C838C"],[0.451505016722408,"#2C848C"],[0.454849498327759,"#2C858C"],[0.45819397993311,"#2C868B"],[0.461538461538462,"#2C878B"],[0.464882943143813,"#2C878B"],[0.468227424749164,"#2C888B"],[0.471571906354515,"#2C898B"],[0.474916387959866,"#2C8A8B"],[0.478260869565217,"#2C8B8B"],[0.481605351170569,"#2B8B8A"],[0.48494983277592,"#2B8C8A"],[0.488294314381271,"#2B8D8A"],[0.491638795986622,"#2B8E8A"],[0.494983277591973,"#2B8F8A"],[0.498327759197324,"#2B8F8A"],[0.501672240802676,"#2B9089"],[0.505016722408027,"#2B9189"],[0.508361204013378,"#2B9289"],[0.511705685618729,"#2B9389"],[0.51505016722408,"#2A9389"],[0.518394648829431,"#2A9489"],[0.521739130434783,"#2A9588"],[0.525083612040134,"#2A9688"],[0.528428093645485,"#2A9788"],[0.531772575250836,"#2A9788"],[0.535117056856187,"#299888"],[0.538461538461538,"#299987"],[0.54180602006689,"#299A87"],[0.545150501672241,"#299B87"],[0.548494983277592,"#289B87"],[0.551839464882943,"#289C87"],[0.555183946488294,"#289D87"],[0.558528428093645,"#279E86"],[0.561872909698997,"#279F86"],[0.565217391304348,"#27A086"],[0.568561872909699,"#26A086"],[0.57190635451505,"#26A186"],[0.575250836120401,"#26A285"],[0.578595317725752,"#25A385"],[0.581939799331104,"#25A485"],[0.585284280936455,"#24A485"],[0.588628762541806,"#24A585"],[0.591973244147157,"#23A684"],[0.595317725752508,"#23A784"],[0.59866220735786,"#22A884"],[0.602006688963211,"#24A884"],[0.605351170568562,"#27A983"],[0.608695652173913,"#2AAA82"],[0.612040133779264,"#2DAA81"],[0.615384615384615,"#2FAB81"],[0.618729096989967,"#32AC80"],[0.622073578595318,"#34AC7F"],[0.625418060200669,"#36AD7E"],[0.62876254180602,"#38AE7E"],[0.632107023411371,"#3AAE7D"],[0.635451505016722,"#3CAF7C"],[0.638795986622074,"#3EB07B"],[0.642140468227425,"#40B07B"],[0.645484949832776,"#42B17A"],[0.648829431438127,"#43B279"],[0.652173913043478,"#45B278"],[0.655518394648829,"#47B378"],[0.658862876254181,"#48B477"],[0.662207357859532,"#4AB476"],[0.665551839464883,"#4BB575"],[0.668896321070234,"#4DB675"],[0.672240802675585,"#4EB674"],[0.675585284280936,"#50B773"],[0.678929765886288,"#51B872"],[0.682274247491639,"#53B971"],[0.68561872909699,"#54B971"],[0.688963210702341,"#55BA70"],[0.692307692307692,"#57BB6F"],[0.695652173913043,"#58BB6E"],[0.698996655518395,"#59BC6D"],[0.702341137123746,"#5BBD6C"],[0.705685618729097,"#5CBD6C"],[0.709030100334448,"#5DBE6B"],[0.712374581939799,"#5EBF6A"],[0.71571906354515,"#5FBF69"],[0.719063545150502,"#61C068"],[0.722408026755853,"#62C167"],[0.725752508361204,"#63C166"],[0.729096989966555,"#64C266"],[0.732441471571906,"#65C365"],[0.735785953177257,"#66C464"],[0.739130434782609,"#67C463"],[0.74247491638796,"#69C562"],[0.745819397993311,"#6AC661"],[0.749163879598662,"#6BC660"],[0.752508361204013,"#6CC75F"],[0.755852842809364,"#6DC85E"],[0.759197324414716,"#6EC85D"],[0.762541806020067,"#6FC95C"],[0.765886287625418,"#70CA5B"],[0.769230769230769,"#71CB5A"],[0.77257525083612,"#72CB59"],[0.775919732441472,"#73CC58"],[0.779264214046823,"#74CD57"],[0.782608695652174,"#75CD56"],[0.785953177257525,"#76CE55"],[0.789297658862876,"#77CF54"],[0.792642140468227,"#78CF53"],[0.795986622073579,"#79D052"],[0.79933110367893,"#7AD151"],[0.802675585284281,"#7CD151"],[0.806020066889632,"#7FD250"],[0.809364548494983,"#81D250"],[0.812709030100334,"#84D34F"],[0.816053511705686,"#87D34F"],[0.819397993311037,"#89D34E"],[0.822742474916388,"#8CD44D"],[0.826086956521739,"#8ED44D"],[0.82943143812709,"#91D54C"],[0.832775919732441,"#93D54C"],[0.836120401337793,"#95D54B"],[0.839464882943144,"#98D64B"],[0.842809364548495,"#9AD64A"],[0.846153846153846,"#9DD74A"],[0.849498327759197,"#9FD749"],[0.852842809364548,"#A1D748"],[0.8561872909699,"#A3D848"],[0.859531772575251,"#A6D847"],[0.862876254180602,"#A8D947"],[0.866220735785953,"#AAD946"],[0.869565217391304,"#ACD946"],[0.872909698996655,"#AFDA45"],[0.876254180602007,"#B1DA44"],[0.879598662207358,"#B3DB44"],[0.882943143812709,"#B5DB43"],[0.88628762541806,"#B7DB42"],[0.889632107023411,"#BADC42"],[0.892976588628763,"#BCDC41"],[0.896321070234114,"#BEDC40"],[0.899665551839465,"#C0DD40"],[0.903010033444816,"#C2DD3F"],[0.906354515050167,"#C4DE3E"],[0.909698996655519,"#C6DE3E"],[0.91304347826087,"#C8DE3D"],[0.916387959866221,"#CBDF3C"],[0.919732441471572,"#CDDF3B"],[0.923076923076923,"#CFDF3B"],[0.926421404682274,"#D1E03A"],[0.929765886287625,"#D3E039"],[0.933110367892977,"#D5E038"],[0.936454849498328,"#D7E138"],[0.939799331103679,"#D9E137"],[0.94314381270903,"#DBE136"],[0.946488294314381,"#DDE235"],[0.949832775919732,"#DFE234"],[0.953177257525083,"#E1E233"],[0.956521739130435,"#E3E333"],[0.959866220735786,"#E5E332"],[0.963210702341137,"#E7E331"],[0.966555183946488,"#E9E430"],[0.969899665551839,"#EBE42F"],[0.973244147157191,"#EDE42E"],[0.976588628762542,"#EFE52D"],[0.979933110367893,"#F1E52C"],[0.983277591973244,"#F3E52B"],[0.986622073578595,"#F5E62A"],[0.989966555183947,"#F7E629"],[0.993311036789298,"#F9E627"],[0.996655518394649,"#FBE726"],[1,"#FDE725"]],"colorbar":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.71796707229778,"thickness":7.55905511811024,"title":"Occurrences","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352},"tickmode":"array","ticktext":["100","200","300","400","500"],"tickvals":[0.0689655172413793,0.271805273833671,0.474645030425964,0.677484787018256,0.880324543610548],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":10.6268161062682},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":41.2386882523869,"r":6.6417600664176,"b":36.5296803652968,"l":65.7534246575343},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352},"title":{"text":"How Much Friends Reference Each Other","font":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022},"x":0.5,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,6.5],"tickmode":"array","ticktext":["Monica","Rachel","Joey","Chandler","Ross","Phoebe"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["Monica","Rachel","Joey","Chandler","Ross","Phoebe"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.3208800332088,"tickwidth":0.603796369674327,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.6268161062682},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.603796369674327,"zeroline":false,"anchor":"y","title":{"text":"Actor","font":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,6.5],"tickmode":"array","ticktext":["Monica","Rachel","Joey","Chandler","Ross","Phoebe"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["Monica","Rachel","Joey","Chandler","Ross","Phoebe"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.3208800332088,"tickwidth":0.603796369674327,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.6268161062682},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.603796369674327,"zeroline":false,"anchor":"x","title":{"text":"Reference","font":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.71796707229778,"font":{"color":"rgba(0,0,0,1)","family":"","size":10.6268161062682}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"10c427326403":{"x":{},"y":{},"fill":{},"type":"heatmap"}},"cur_data":"10c427326403","visdat":{"10c427326403":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script> Not surprisingly, they don’t tend to reference themselves as often. However, as we’ve seen before, Rachel references Ross even more than any other character reference the others. Even Ross doesn’t reference Rachel that often.</p>
<p>We can also examine how different is the vocabulary each characters use:</p>
<pre class="r"><code>scripts %&gt;% 
  mutate(word = str_extract(word, &quot;[a-z&#39;]+&quot;)) %&gt;%
  count(actor, word) %&gt;%
  group_by(actor) %&gt;%
  mutate(proportion = n / sum(!is.na(word))) %&gt;% 
  select(-n) %&gt;% 
  spread(actor, proportion) %&gt;% 
  gather(actor, proportion, -Chandler, -word) %&gt;%
  na.omit() %&gt;%
  ggplot(aes(x = proportion, y = Chandler, 
             color = abs(Chandler - proportion))) +
  geom_abline(color = &quot;gray40&quot;, lty = 2) +
  geom_jitter(alpha = 0.1, size = 2.5,
              width = 0.3, height = 0.3) +
  geom_text(aes(label = word), 
            check_overlap = TRUE, vjust = 1.5) +
  scale_x_log10(labels = scales::percent_format()) +
  scale_y_log10(labels = scales::percent_format()) +
  viridis::scale_color_viridis(limits = c(0, 0.001)) +
  facet_wrap(~actor, ncol = 2) +
  theme(legend.position=&quot;none&quot;) +
  labs(y = &quot;Chandler&quot;, x = NULL)</code></pre>
<p><img src="/post/Rating_and_sentiment_analysis_for_Friends_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Let’s continue to some sentiment analyses</p>
<pre class="r"><code>sentimentScript &lt;- scripts %&gt;% 
  inner_join(tidytext::get_sentiments(&quot;bing&quot;), by = &quot;word&quot;) %&gt;%
  group_by(actor, season, episode, sentiment) %&gt;%
  count(word) %&gt;% 
  spread(sentiment, n, fill = 0) %&gt;%
  summarise(sentiment = sum(positive) - sum(negative)) %&gt;%
  ungroup() </code></pre>
<pre><code>## `summarise()` regrouping output by &#39;actor&#39;, &#39;season&#39; (override with `.groups` argument)</code></pre>
<p>We can look for the most negative season:</p>
<pre class="r"><code>sentimentScript %&gt;% 
  group_by(season) %&gt;%
  summarise(avg = mean(sentiment)) %&gt;% 
  ungroup() %&gt;%
  arrange(avg) </code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 10 x 2
##    season     avg
##     &lt;int&gt;   &lt;dbl&gt;
##  1      6 -1.65  
##  2      9 -1.18  
##  3      1 -1.09  
##  4      3 -0.993 
##  5      2 -0.964 
##  6      5 -0.928 
##  7      8 -0.457 
##  8      4 -0.232 
##  9     10  0.0784
## 10      7  0.297</code></pre>
<p>Or the most negative character for each season:</p>
<pre class="r"><code>sentimentScript %&gt;% 
  group_by(season, actor) %&gt;%
  summarise(avg = mean(sentiment)) %&gt;% 
  top_n(-1) %&gt;%
  ungroup() %&gt;%
  arrange(avg) </code></pre>
<pre><code>## `summarise()` regrouping output by &#39;season&#39; (override with `.groups` argument)</code></pre>
<pre><code>## Selecting by avg</code></pre>
<pre><code>## # A tibble: 10 x 3
##    season actor      avg
##     &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1      2 Chandler -3.43
##  2      9 Chandler -3.35
##  3      6 Monica   -2.77
##  4      3 Rachel   -2.48
##  5      1 Chandler -1.96
##  6      5 Rachel   -1.83
##  7      8 Chandler -1.83
##  8     10 Chandler -1.71
##  9      4 Monica   -1.52
## 10      7 Phoebe   -1.52</code></pre>
<p>We can also create a heat-map to identify the most negative and positive episode over the seasons</p>
<pre class="r"><code>plotly::ggplotly(
  sentimentScript %&gt;%
    group_by(episode, season) %&gt;% 
    summarise(avg = mean(sentiment)) %&gt;% 
    ggplot(aes(episode, season, fill = avg)) + 
    geom_tile(colour = &quot;white&quot;, size = 0.2) +
    labs(x = &quot;Episode&quot;, 
         y = &quot;Season&quot;,
         fill = &quot;Average Sentiment&quot;,
         title = &quot;Avrage Sentiment Values Across Episdoes By Seasons&quot;) +
    scale_x_continuous(expand = c(0,0), breaks = seq(1, 25, 1)) +
    scale_y_continuous(expand = c(0,0), breaks = seq(1, 10, 1)) +
    scale_fill_continuous(type = &quot;viridis&quot;) +
    theme_grey(base_size = 10) +
    theme(plot.title = element_text(hjust = 0.5),
          legend.margin=margin(grid::unit(0,&quot;cm&quot;)),
          legend.key.height=grid::unit(0.8,&quot;cm&quot;),
          legend.key.width=grid::unit(0.2,&quot;cm&quot;))
  )</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;episode&#39; (override with `.groups` argument)</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],"y":[1,2,3,4,5,6,7,8,9,10],"z":[[0.632183908045977,0.310344827586207,0.540229885057471,0.67816091954023,0.701149425287356,0.379310344827586,0.35632183908046,0.609195402298851,0.402298850574713,0.505747126436782,0.540229885057471,0.609195402298851,0.436781609195402,0.436781609195402,0.551724137931034,0.459770114942529,0.448275862068966,0.471264367816092,0.344827586206897,0.402298850574713,0.35632183908046,0.701149425287356,0.482758620689655,0.632183908045977,null],[0.333333333333333,0.379310344827586,0.149425287356322,0.586206896551724,0.850574712643678,0.367816091954023,0.609195402298851,0.517241379310345,0.540229885057471,0.402298850574713,0.436781609195402,0.505747126436782,null,0.413793103448276,0.701149425287356,0.632183908045977,0.71264367816092,0.448275862068966,0.379310344827586,0.528735632183908,0.471264367816092,0.551724137931034,0.574712643678161,0.597701149425287,null],[0.459770114942529,0.64367816091954,0.459770114942529,0.264367816091954,0.689655172413793,0.632183908045977,0.494252873563218,0.471264367816092,0.528735632183908,0.563218390804598,0.494252873563218,0.632183908045977,0.563218390804598,0.0804597701149426,0.540229885057471,0.367816091954023,0.344827586206897,0.540229885057471,0.333333333333333,0.574712643678161,0.827586206896552,0.528735632183908,0.609195402298851,0.482758620689655,0.528735632183908],[0.183908045977012,0.563218390804598,0.609195402298851,0.620689655172414,0.586206896551724,0.64367816091954,0.471264367816092,0.505747126436782,0.735632183908046,0.563218390804598,0.632183908045977,0.620689655172414,0.28735632183908,0.436781609195402,0.379310344827586,0.597701149425287,1,0.64367816091954,0.597701149425287,0.551724137931034,0.482758620689655,0.666666666666667,0.471264367816092,null,null],[0.620689655172414,0.39080459770115,0.551724137931034,0.413793103448276,0.28735632183908,0.413793103448276,0.689655172413793,0.32183908045977,0.333333333333333,0.689655172413793,0.655172413793103,0.310344827586207,0.448275862068966,0.551724137931034,0.540229885057471,0.666666666666667,0.655172413793103,0.494252873563218,0.471264367816092,0.275862068965517,0.67816091954023,0.333333333333333,0.954022988505747,null,null],[0.689655172413793,0.367816091954023,0.67816091954023,0,0.264367816091954,0.632183908045977,0.425287356321839,0.528735632183908,0.67816091954023,0.528735632183908,0.275862068965517,0.229885057471264,0.64367816091954,0.298850574712644,0.206896551724138,null,0.563218390804598,0.436781609195402,0.402298850574713,0.32183908045977,0.459770114942529,0.71264367816092,0.602298850574713,0.67816091954023,null],[0.482758620689655,0.471264367816092,0.597701149425287,0.563218390804598,0.436781609195402,0.620689655172414,0.655172413793103,0.252873563218391,0.413793103448276,0.71264367816092,0.505747126436782,0.448275862068966,0.586206896551724,0.701149425287356,0.597701149425287,0.597701149425287,0.563218390804598,0.862068965517241,0.67816091954023,0.67816091954023,0.862068965517241,0.71264367816092,0.689655172413793,null,null],[0.666666666666667,0.482758620689655,0.701149425287356,0.540229885057471,0.344827586206897,0.632183908045977,0.459770114942529,0.425287356321839,0.655172413793103,0.494252873563218,0.517241379310345,0.597701149425287,0.494252873563218,0.459770114942529,0.609195402298851,0.632183908045977,0.494252873563218,0.770114942528736,0.597701149425287,0.67816091954023,0.195402298850575,0.459770114942529,0.586206896551724,null,null],[0.540229885057471,0.436781609195402,0.655172413793103,0.482758620689655,0.333333333333333,0.39080459770115,0.436781609195402,0.218390804597701,0.632183908045977,0.735632183908046,0.574712643678161,0.632183908045977,0.425287356321839,0.367816091954023,0.367816091954023,0.666666666666667,0.0804597701149426,0.96551724137931,0.563218390804598,0.563218390804598,0.471264367816092,0.517241379310345,0.28735632183908,null,null],[0.666666666666667,0.781609195402299,0.528735632183908,0.701149425287356,0.896551724137931,0.160919540229885,0.632183908045977,0.482758620689655,0.758620689655172,0.459770114942529,0.425287356321839,0.528735632183908,0.425287356321839,0.563218390804598,0.735632183908046,0.367816091954023,0.747126436781609,null,null,null,null,null,null,null,null]],"text":[["episode:  1<br />season:  1<br />avg:  0.8333333","episode:  2<br />season:  1<br />avg: -3.8333333","episode:  3<br />season:  1<br />avg: -0.5000000","episode:  4<br />season:  1<br />avg:  1.5000000","episode:  5<br />season:  1<br />avg:  1.8333333","episode:  6<br />season:  1<br />avg: -2.8333333","episode:  7<br />season:  1<br />avg: -3.1666667","episode:  8<br />season:  1<br />avg:  0.5000000","episode:  9<br />season:  1<br />avg: -2.5000000","episode: 10<br />season:  1<br />avg: -1.0000000","episode: 11<br />season:  1<br />avg: -0.5000000","episode: 12<br />season:  1<br />avg:  0.5000000","episode: 13<br />season:  1<br />avg: -2.0000000","episode: 14<br />season:  1<br />avg: -2.0000000","episode: 15<br />season:  1<br />avg: -0.3333333","episode: 16<br />season:  1<br />avg: -1.6666667","episode: 17<br />season:  1<br />avg: -1.8333333","episode: 18<br />season:  1<br />avg: -1.5000000","episode: 19<br />season:  1<br />avg: -3.3333333","episode: 20<br />season:  1<br />avg: -2.5000000","episode: 21<br />season:  1<br />avg: -3.1666667","episode: 22<br />season:  1<br />avg:  1.8333333","episode: 23<br />season:  1<br />avg: -1.3333333","episode: 24<br />season:  1<br />avg:  0.8333333",null],["episode:  1<br />season:  2<br />avg: -3.5000000","episode:  2<br />season:  2<br />avg: -2.8333333","episode:  3<br />season:  2<br />avg: -6.1666667","episode:  4<br />season:  2<br />avg:  0.1666667","episode:  5<br />season:  2<br />avg:  4.0000000","episode:  6<br />season:  2<br />avg: -3.0000000","episode:  7<br />season:  2<br />avg:  0.5000000","episode:  8<br />season:  2<br />avg: -0.8333333","episode:  9<br />season:  2<br />avg: -0.5000000","episode: 10<br />season:  2<br />avg: -2.5000000","episode: 11<br />season:  2<br />avg: -2.0000000","episode: 12<br />season:  2<br />avg: -1.0000000",null,"episode: 14<br />season:  2<br />avg: -2.3333333","episode: 15<br />season:  2<br />avg:  1.8333333","episode: 16<br />season:  2<br />avg:  0.8333333","episode: 17<br />season:  2<br />avg:  2.0000000","episode: 18<br />season:  2<br />avg: -1.8333333","episode: 19<br />season:  2<br />avg: -2.8333333","episode: 20<br />season:  2<br />avg: -0.6666667","episode: 21<br />season:  2<br />avg: -1.5000000","episode: 22<br />season:  2<br />avg: -0.3333333","episode: 23<br />season:  2<br />avg:  0.0000000","episode: 24<br />season:  2<br />avg:  0.3333333",null],["episode:  1<br />season:  3<br />avg: -1.6666667","episode:  2<br />season:  3<br />avg:  1.0000000","episode:  3<br />season:  3<br />avg: -1.6666667","episode:  4<br />season:  3<br />avg: -4.5000000","episode:  5<br />season:  3<br />avg:  1.6666667","episode:  6<br />season:  3<br />avg:  0.8333333","episode:  7<br />season:  3<br />avg: -1.1666667","episode:  8<br />season:  3<br />avg: -1.5000000","episode:  9<br />season:  3<br />avg: -0.6666667","episode: 10<br />season:  3<br />avg: -0.1666667","episode: 11<br />season:  3<br />avg: -1.1666667","episode: 12<br />season:  3<br />avg:  0.8333333","episode: 13<br />season:  3<br />avg: -0.1666667","episode: 14<br />season:  3<br />avg: -7.1666667","episode: 15<br />season:  3<br />avg: -0.5000000","episode: 16<br />season:  3<br />avg: -3.0000000","episode: 17<br />season:  3<br />avg: -3.3333333","episode: 18<br />season:  3<br />avg: -0.5000000","episode: 19<br />season:  3<br />avg: -3.5000000","episode: 20<br />season:  3<br />avg:  0.0000000","episode: 21<br />season:  3<br />avg:  3.6666667","episode: 22<br />season:  3<br />avg: -0.6666667","episode: 23<br />season:  3<br />avg:  0.5000000","episode: 24<br />season:  3<br />avg: -1.3333333","episode: 25<br />season:  3<br />avg: -0.6666667"],["episode:  1<br />season:  4<br />avg: -5.6666667","episode:  2<br />season:  4<br />avg: -0.1666667","episode:  3<br />season:  4<br />avg:  0.5000000","episode:  4<br />season:  4<br />avg:  0.6666667","episode:  5<br />season:  4<br />avg:  0.1666667","episode:  6<br />season:  4<br />avg:  1.0000000","episode:  7<br />season:  4<br />avg: -1.5000000","episode:  8<br />season:  4<br />avg: -1.0000000","episode:  9<br />season:  4<br />avg:  2.3333333","episode: 10<br />season:  4<br />avg: -0.1666667","episode: 11<br />season:  4<br />avg:  0.8333333","episode: 12<br />season:  4<br />avg:  0.6666667","episode: 13<br />season:  4<br />avg: -4.1666667","episode: 14<br />season:  4<br />avg: -2.0000000","episode: 15<br />season:  4<br />avg: -2.8333333","episode: 16<br />season:  4<br />avg:  0.3333333","episode: 17<br />season:  4<br />avg:  6.1666667","episode: 18<br />season:  4<br />avg:  1.0000000","episode: 19<br />season:  4<br />avg:  0.3333333","episode: 20<br />season:  4<br />avg: -0.3333333","episode: 21<br />season:  4<br />avg: -1.3333333","episode: 22<br />season:  4<br />avg:  1.3333333","episode: 23<br />season:  4<br />avg: -1.5000000",null,null],["episode:  1<br />season:  5<br />avg:  0.6666667","episode:  2<br />season:  5<br />avg: -2.6666667","episode:  3<br />season:  5<br />avg: -0.3333333","episode:  4<br />season:  5<br />avg: -2.3333333","episode:  5<br />season:  5<br />avg: -4.1666667","episode:  6<br />season:  5<br />avg: -2.3333333","episode:  7<br />season:  5<br />avg:  1.6666667","episode:  8<br />season:  5<br />avg: -3.6666667","episode:  9<br />season:  5<br />avg: -3.5000000","episode: 10<br />season:  5<br />avg:  1.6666667","episode: 11<br />season:  5<br />avg:  1.1666667","episode: 12<br />season:  5<br />avg: -3.8333333","episode: 13<br />season:  5<br />avg: -1.8333333","episode: 14<br />season:  5<br />avg: -0.3333333","episode: 15<br />season:  5<br />avg: -0.5000000","episode: 16<br />season:  5<br />avg:  1.3333333","episode: 17<br />season:  5<br />avg:  1.1666667","episode: 18<br />season:  5<br />avg: -1.1666667","episode: 19<br />season:  5<br />avg: -1.5000000","episode: 20<br />season:  5<br />avg: -4.3333333","episode: 21<br />season:  5<br />avg:  1.5000000","episode: 22<br />season:  5<br />avg: -3.5000000","episode: 23<br />season:  5<br />avg:  5.5000000",null,null],["episode:  1<br />season:  6<br />avg:  1.6666667","episode:  2<br />season:  6<br />avg: -3.0000000","episode:  3<br />season:  6<br />avg:  1.5000000","episode:  4<br />season:  6<br />avg: -8.3333333","episode:  5<br />season:  6<br />avg: -4.5000000","episode:  6<br />season:  6<br />avg:  0.8333333","episode:  7<br />season:  6<br />avg: -2.1666667","episode:  8<br />season:  6<br />avg: -0.6666667","episode:  9<br />season:  6<br />avg:  1.5000000","episode: 10<br />season:  6<br />avg: -0.6666667","episode: 11<br />season:  6<br />avg: -4.3333333","episode: 12<br />season:  6<br />avg: -5.0000000","episode: 13<br />season:  6<br />avg:  1.0000000","episode: 14<br />season:  6<br />avg: -4.0000000","episode: 15<br />season:  6<br />avg: -5.3333333",null,"episode: 17<br />season:  6<br />avg: -0.1666667","episode: 18<br />season:  6<br />avg: -2.0000000","episode: 19<br />season:  6<br />avg: -2.5000000","episode: 20<br />season:  6<br />avg: -3.6666667","episode: 21<br />season:  6<br />avg: -1.6666667","episode: 22<br />season:  6<br />avg:  2.0000000","episode: 23<br />season:  6<br />avg:  0.4000000","episode: 24<br />season:  6<br />avg:  1.5000000",null],["episode:  1<br />season:  7<br />avg: -1.3333333","episode:  2<br />season:  7<br />avg: -1.5000000","episode:  3<br />season:  7<br />avg:  0.3333333","episode:  4<br />season:  7<br />avg: -0.1666667","episode:  5<br />season:  7<br />avg: -2.0000000","episode:  6<br />season:  7<br />avg:  0.6666667","episode:  7<br />season:  7<br />avg:  1.1666667","episode:  8<br />season:  7<br />avg: -4.6666667","episode:  9<br />season:  7<br />avg: -2.3333333","episode: 10<br />season:  7<br />avg:  2.0000000","episode: 11<br />season:  7<br />avg: -1.0000000","episode: 12<br />season:  7<br />avg: -1.8333333","episode: 13<br />season:  7<br />avg:  0.1666667","episode: 14<br />season:  7<br />avg:  1.8333333","episode: 15<br />season:  7<br />avg:  0.3333333","episode: 16<br />season:  7<br />avg:  0.3333333","episode: 17<br />season:  7<br />avg: -0.1666667","episode: 18<br />season:  7<br />avg:  4.1666667","episode: 19<br />season:  7<br />avg:  1.5000000","episode: 20<br />season:  7<br />avg:  1.5000000","episode: 21<br />season:  7<br />avg:  4.1666667","episode: 22<br />season:  7<br />avg:  2.0000000","episode: 23<br />season:  7<br />avg:  1.6666667",null,null],["episode:  1<br />season:  8<br />avg:  1.3333333","episode:  2<br />season:  8<br />avg: -1.3333333","episode:  3<br />season:  8<br />avg:  1.8333333","episode:  4<br />season:  8<br />avg: -0.5000000","episode:  5<br />season:  8<br />avg: -3.3333333","episode:  6<br />season:  8<br />avg:  0.8333333","episode:  7<br />season:  8<br />avg: -1.6666667","episode:  8<br />season:  8<br />avg: -2.1666667","episode:  9<br />season:  8<br />avg:  1.1666667","episode: 10<br />season:  8<br />avg: -1.1666667","episode: 11<br />season:  8<br />avg: -0.8333333","episode: 12<br />season:  8<br />avg:  0.3333333","episode: 13<br />season:  8<br />avg: -1.1666667","episode: 14<br />season:  8<br />avg: -1.6666667","episode: 15<br />season:  8<br />avg:  0.5000000","episode: 16<br />season:  8<br />avg:  0.8333333","episode: 17<br />season:  8<br />avg: -1.1666667","episode: 18<br />season:  8<br />avg:  2.8333333","episode: 19<br />season:  8<br />avg:  0.3333333","episode: 20<br />season:  8<br />avg:  1.5000000","episode: 21<br />season:  8<br />avg: -5.5000000","episode: 22<br />season:  8<br />avg: -1.6666667","episode: 23<br />season:  8<br />avg:  0.1666667",null,null],["episode:  1<br />season:  9<br />avg: -0.5000000","episode:  2<br />season:  9<br />avg: -2.0000000","episode:  3<br />season:  9<br />avg:  1.1666667","episode:  4<br />season:  9<br />avg: -1.3333333","episode:  5<br />season:  9<br />avg: -3.5000000","episode:  6<br />season:  9<br />avg: -2.6666667","episode:  7<br />season:  9<br />avg: -2.0000000","episode:  8<br />season:  9<br />avg: -5.1666667","episode:  9<br />season:  9<br />avg:  0.8333333","episode: 10<br />season:  9<br />avg:  2.3333333","episode: 11<br />season:  9<br />avg:  0.0000000","episode: 12<br />season:  9<br />avg:  0.8333333","episode: 13<br />season:  9<br />avg: -2.1666667","episode: 14<br />season:  9<br />avg: -3.0000000","episode: 15<br />season:  9<br />avg: -3.0000000","episode: 16<br />season:  9<br />avg:  1.3333333","episode: 17<br />season:  9<br />avg: -7.1666667","episode: 18<br />season:  9<br />avg:  5.6666667","episode: 19<br />season:  9<br />avg: -0.1666667","episode: 20<br />season:  9<br />avg: -0.1666667","episode: 21<br />season:  9<br />avg: -1.5000000","episode: 22<br />season:  9<br />avg: -0.8333333","episode: 23<br />season:  9<br />avg: -4.1666667",null,null],["episode:  1<br />season: 10<br />avg:  1.3333333","episode:  2<br />season: 10<br />avg:  3.0000000","episode:  3<br />season: 10<br />avg: -0.6666667","episode:  4<br />season: 10<br />avg:  1.8333333","episode:  5<br />season: 10<br />avg:  4.6666667","episode:  6<br />season: 10<br />avg: -6.0000000","episode:  7<br />season: 10<br />avg:  0.8333333","episode:  8<br />season: 10<br />avg: -1.3333333","episode:  9<br />season: 10<br />avg:  2.6666667","episode: 10<br />season: 10<br />avg: -1.6666667","episode: 11<br />season: 10<br />avg: -2.1666667","episode: 12<br />season: 10<br />avg: -0.6666667","episode: 13<br />season: 10<br />avg: -2.1666667","episode: 14<br />season: 10<br />avg: -0.1666667","episode: 15<br />season: 10<br />avg:  2.3333333","episode: 16<br />season: 10<br />avg: -3.0000000","episode: 17<br />season: 10<br />avg:  2.5000000",null,null,null,null,null,null,null,null]],"colorscale":[[0,"#440154"],[0.0804597701149426,"#462268"],[0.149425287356322,"#44367A"],[0.160919540229885,"#44397D"],[0.183908045977012,"#424083"],[0.195402298850575,"#414386"],[0.206896551724138,"#414687"],[0.218390804597701,"#404988"],[0.229885057471264,"#404C88"],[0.252873563218391,"#3F5289"],[0.264367816091954,"#3E5589"],[0.275862068965517,"#3D588A"],[0.28735632183908,"#3C5B8A"],[0.298850574712644,"#3B5E8B"],[0.310344827586207,"#3A618B"],[0.32183908045977,"#38648B"],[0.333333333333333,"#37678C"],[0.344827586206897,"#356A8C"],[0.35632183908046,"#336D8D"],[0.367816091954023,"#31708D"],[0.379310344827586,"#2F738D"],[0.39080459770115,"#2C768E"],[0.402298850574713,"#2A798E"],[0.413793103448276,"#2B7B8D"],[0.425287356321839,"#2B7E8D"],[0.436781609195402,"#2B818C"],[0.448275862068966,"#2C838C"],[0.459770114942529,"#2C868B"],[0.471264367816092,"#2C898B"],[0.482758620689655,"#2B8C8A"],[0.494252873563218,"#2B8E8A"],[0.505747126436782,"#2B9189"],[0.517241379310345,"#2A9489"],[0.528735632183908,"#2A9788"],[0.540229885057471,"#299987"],[0.551724137931034,"#289C87"],[0.563218390804598,"#279F86"],[0.574712643678161,"#26A285"],[0.586206896551724,"#24A585"],[0.597701149425287,"#22A784"],[0.602298850574713,"#24A884"],[0.609195402298851,"#2AAA82"],[0.620689655172414,"#33AC7F"],[0.632183908045977,"#3AAE7D"],[0.64367816091954,"#41B17A"],[0.655172413793103,"#47B378"],[0.666666666666667,"#4CB575"],[0.67816091954023,"#51B872"],[0.689655172413793,"#56BA70"],[0.701149425287356,"#5ABC6D"],[0.71264367816092,"#5EBF6A"],[0.735632183908046,"#66C464"],[0.747126436781609,"#6AC661"],[0.758620689655172,"#6EC85E"],[0.770114942528736,"#71CB5A"],[0.781609195402299,"#75CD57"],[0.827586206896552,"#8FD44D"],[0.850574712643678,"#A0D749"],[0.862068965517241,"#A7D947"],[0.896551724137931,"#BEDC40"],[0.954022988505747,"#E2E333"],[0.96551724137931,"#E9E430"],[1,"#FDE725"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1],"y":[1],"name":"99_34baf3ff769edb0cadc5d515929b4b7a","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#440154"],[0.00334448160535121,"#440355"],[0.00668896321070229,"#440456"],[0.0100334448160535,"#440656"],[0.0133779264214047,"#450857"],[0.0167224080267559,"#450958"],[0.020066889632107,"#450B59"],[0.0234113712374582,"#450D5A"],[0.0267558528428093,"#450E5B"],[0.0301003344481606,"#45105B"],[0.0334448160535117,"#45115C"],[0.0367892976588629,"#45135D"],[0.040133779264214,"#45145E"],[0.0434782608695652,"#45155F"],[0.0468227424749164,"#451760"],[0.0501672240802675,"#451860"],[0.0535117056856188,"#451961"],[0.0568561872909699,"#461A62"],[0.0602006688963211,"#461B63"],[0.0635451505016723,"#461D64"],[0.0668896321070234,"#461E65"],[0.0702341137123746,"#461F65"],[0.0735785953177257,"#462066"],[0.0769230769230769,"#462167"],[0.0802675585284281,"#462268"],[0.0836120401337793,"#462369"],[0.0869565217391305,"#46246A"],[0.0903010033444816,"#46256B"],[0.0936454849498328,"#46266B"],[0.096989966555184,"#46276C"],[0.100334448160535,"#46286D"],[0.103678929765886,"#46296E"],[0.107023411371237,"#462A6F"],[0.110367892976589,"#452B70"],[0.11371237458194,"#452C70"],[0.117056856187291,"#452D71"],[0.120401337792642,"#452E72"],[0.123745819397993,"#452F73"],[0.127090301003345,"#453074"],[0.130434782608696,"#453175"],[0.133779264214047,"#453276"],[0.137123745819398,"#453377"],[0.140468227424749,"#453477"],[0.1438127090301,"#443578"],[0.147157190635451,"#443679"],[0.150501672240803,"#44367A"],[0.153846153846154,"#44377B"],[0.157190635451505,"#44387C"],[0.160535117056856,"#44397D"],[0.163879598662207,"#443A7D"],[0.167224080267559,"#433B7E"],[0.17056856187291,"#433C7F"],[0.173913043478261,"#433D80"],[0.177257525083612,"#433E81"],[0.180602006688963,"#433F82"],[0.183946488294314,"#424083"],[0.187290969899666,"#424184"],[0.190635451505017,"#424185"],[0.193979933110368,"#424285"],[0.197324414715719,"#414386"],[0.20066889632107,"#414487"],[0.204013377926421,"#414587"],[0.207357859531773,"#414687"],[0.210702341137124,"#414787"],[0.214046822742475,"#414888"],[0.217391304347826,"#404988"],[0.220735785953177,"#404A88"],[0.224080267558528,"#404A88"],[0.22742474916388,"#404B88"],[0.230769230769231,"#404C88"],[0.234113712374582,"#404D88"],[0.237458193979933,"#404E88"],[0.240802675585284,"#3F4F89"],[0.244147157190635,"#3F5089"],[0.247491638795987,"#3F5189"],[0.250836120401338,"#3F5289"],[0.254180602006689,"#3F5289"],[0.25752508361204,"#3E5389"],[0.260869565217391,"#3E5489"],[0.264214046822743,"#3E5589"],[0.267558528428094,"#3E568A"],[0.270903010033445,"#3D578A"],[0.274247491638796,"#3D588A"],[0.277591973244147,"#3D598A"],[0.280936454849498,"#3D598A"],[0.284280936454849,"#3C5A8A"],[0.287625418060201,"#3C5B8A"],[0.290969899665552,"#3C5C8A"],[0.294314381270903,"#3B5D8A"],[0.297658862876254,"#3B5E8B"],[0.301003344481605,"#3B5F8B"],[0.304347826086957,"#3A5F8B"],[0.307692307692308,"#3A608B"],[0.311036789297659,"#3A618B"],[0.31438127090301,"#39628B"],[0.317725752508361,"#39638B"],[0.321070234113712,"#38648B"],[0.324414715719064,"#38658C"],[0.327759197324415,"#38658C"],[0.331103678929766,"#37668C"],[0.334448160535117,"#37678C"],[0.337792642140468,"#36688C"],[0.341137123745819,"#36698C"],[0.344481605351171,"#356A8C"],[0.347826086956522,"#356B8C"],[0.351170568561873,"#346B8C"],[0.354515050167224,"#346C8D"],[0.357859531772575,"#336D8D"],[0.361204013377926,"#326E8D"],[0.364548494983278,"#326F8D"],[0.367892976588629,"#31708D"],[0.37123745819398,"#31718D"],[0.374581939799331,"#30718D"],[0.377926421404682,"#2F728D"],[0.381270903010033,"#2F738D"],[0.384615384615385,"#2E748E"],[0.387959866220736,"#2D758E"],[0.391304347826087,"#2C768E"],[0.394648829431438,"#2B778E"],[0.397993311036789,"#2B778E"],[0.401337792642141,"#2A788E"],[0.404682274247492,"#2A798E"],[0.408026755852843,"#2A7A8E"],[0.411371237458194,"#2B7B8E"],[0.414715719063545,"#2B7B8D"],[0.418060200668896,"#2B7C8D"],[0.421404682274247,"#2B7D8D"],[0.424749163879599,"#2B7E8D"],[0.42809364548495,"#2B7F8D"],[0.431438127090301,"#2B7F8D"],[0.434782608695652,"#2B808D"],[0.438127090301003,"#2B818C"],[0.441471571906355,"#2B828C"],[0.444816053511706,"#2B838C"],[0.448160535117057,"#2C838C"],[0.451505016722408,"#2C848C"],[0.454849498327759,"#2C858C"],[0.45819397993311,"#2C868B"],[0.461538461538462,"#2C878B"],[0.464882943143813,"#2C878B"],[0.468227424749164,"#2C888B"],[0.471571906354515,"#2C898B"],[0.474916387959866,"#2C8A8B"],[0.478260869565217,"#2C8B8B"],[0.481605351170569,"#2B8B8A"],[0.48494983277592,"#2B8C8A"],[0.488294314381271,"#2B8D8A"],[0.491638795986622,"#2B8E8A"],[0.494983277591973,"#2B8F8A"],[0.498327759197324,"#2B8F8A"],[0.501672240802676,"#2B9089"],[0.505016722408027,"#2B9189"],[0.508361204013378,"#2B9289"],[0.511705685618729,"#2B9389"],[0.51505016722408,"#2A9389"],[0.518394648829431,"#2A9489"],[0.521739130434783,"#2A9588"],[0.525083612040134,"#2A9688"],[0.528428093645485,"#2A9788"],[0.531772575250836,"#2A9788"],[0.535117056856187,"#299888"],[0.538461538461539,"#299987"],[0.54180602006689,"#299A87"],[0.545150501672241,"#299B87"],[0.548494983277592,"#289B87"],[0.551839464882943,"#289C87"],[0.555183946488294,"#289D87"],[0.558528428093646,"#279E86"],[0.561872909698997,"#279F86"],[0.565217391304348,"#27A086"],[0.568561872909699,"#26A086"],[0.57190635451505,"#26A186"],[0.575250836120401,"#26A285"],[0.578595317725752,"#25A385"],[0.581939799331104,"#25A485"],[0.585284280936455,"#24A485"],[0.588628762541806,"#24A585"],[0.591973244147157,"#23A684"],[0.595317725752508,"#23A784"],[0.59866220735786,"#22A884"],[0.602006688963211,"#24A884"],[0.605351170568562,"#27A983"],[0.608695652173913,"#2AAA82"],[0.612040133779264,"#2DAA81"],[0.615384615384615,"#2FAB81"],[0.618729096989967,"#32AC80"],[0.622073578595318,"#34AC7F"],[0.625418060200669,"#36AD7E"],[0.62876254180602,"#38AE7E"],[0.632107023411371,"#3AAE7D"],[0.635451505016722,"#3CAF7C"],[0.638795986622074,"#3EB07B"],[0.642140468227425,"#40B07B"],[0.645484949832776,"#42B17A"],[0.648829431438127,"#43B279"],[0.652173913043478,"#45B278"],[0.65551839464883,"#47B378"],[0.658862876254181,"#48B477"],[0.662207357859532,"#4AB476"],[0.665551839464883,"#4BB575"],[0.668896321070234,"#4DB675"],[0.672240802675585,"#4EB674"],[0.675585284280937,"#50B773"],[0.678929765886288,"#51B872"],[0.682274247491639,"#53B971"],[0.68561872909699,"#54B971"],[0.688963210702341,"#55BA70"],[0.692307692307692,"#57BB6F"],[0.695652173913043,"#58BB6E"],[0.698996655518395,"#59BC6D"],[0.702341137123746,"#5BBD6C"],[0.705685618729097,"#5CBD6C"],[0.709030100334448,"#5DBE6B"],[0.712374581939799,"#5EBF6A"],[0.71571906354515,"#5FBF69"],[0.719063545150502,"#61C068"],[0.722408026755853,"#62C167"],[0.725752508361204,"#63C166"],[0.729096989966555,"#64C266"],[0.732441471571906,"#65C365"],[0.735785953177258,"#66C464"],[0.739130434782609,"#67C463"],[0.74247491638796,"#69C562"],[0.745819397993311,"#6AC661"],[0.749163879598662,"#6BC660"],[0.752508361204013,"#6CC75F"],[0.755852842809365,"#6DC85E"],[0.759197324414716,"#6EC85D"],[0.762541806020067,"#6FC95C"],[0.765886287625418,"#70CA5B"],[0.769230769230769,"#71CB5A"],[0.77257525083612,"#72CB59"],[0.775919732441472,"#73CC58"],[0.779264214046823,"#74CD57"],[0.782608695652174,"#75CD56"],[0.785953177257525,"#76CE55"],[0.789297658862876,"#77CF54"],[0.792642140468228,"#78CF53"],[0.795986622073579,"#79D052"],[0.79933110367893,"#7AD151"],[0.802675585284281,"#7CD151"],[0.806020066889632,"#7FD250"],[0.809364548494983,"#81D250"],[0.812709030100334,"#84D34F"],[0.816053511705686,"#87D34F"],[0.819397993311037,"#89D34E"],[0.822742474916388,"#8CD44D"],[0.826086956521739,"#8ED44D"],[0.82943143812709,"#91D54C"],[0.832775919732441,"#93D54C"],[0.836120401337793,"#95D54B"],[0.839464882943144,"#98D64B"],[0.842809364548495,"#9AD64A"],[0.846153846153846,"#9DD74A"],[0.849498327759197,"#9FD749"],[0.852842809364548,"#A1D748"],[0.8561872909699,"#A3D848"],[0.859531772575251,"#A6D847"],[0.862876254180602,"#A8D947"],[0.866220735785953,"#AAD946"],[0.869565217391304,"#ACD946"],[0.872909698996656,"#AFDA45"],[0.876254180602007,"#B1DA44"],[0.879598662207358,"#B3DB44"],[0.882943143812709,"#B5DB43"],[0.88628762541806,"#B7DB42"],[0.889632107023411,"#BADC42"],[0.892976588628763,"#BCDC41"],[0.896321070234114,"#BEDC40"],[0.899665551839465,"#C0DD40"],[0.903010033444816,"#C2DD3F"],[0.906354515050167,"#C4DE3E"],[0.909698996655518,"#C6DE3E"],[0.91304347826087,"#C8DE3D"],[0.916387959866221,"#CBDF3C"],[0.919732441471572,"#CDDF3B"],[0.923076923076923,"#CFDF3B"],[0.926421404682274,"#D1E03A"],[0.929765886287625,"#D3E039"],[0.933110367892977,"#D5E038"],[0.936454849498328,"#D7E138"],[0.939799331103679,"#D9E137"],[0.94314381270903,"#DBE136"],[0.946488294314381,"#DDE235"],[0.949832775919732,"#DFE234"],[0.953177257525084,"#E1E233"],[0.956521739130435,"#E3E333"],[0.959866220735786,"#E5E332"],[0.963210702341137,"#E7E331"],[0.966555183946488,"#E9E430"],[0.969899665551839,"#EBE42F"],[0.973244147157191,"#EDE42E"],[0.976588628762542,"#EFE52D"],[0.979933110367893,"#F1E52C"],[0.983277591973244,"#F3E52B"],[0.986622073578595,"#F5E62A"],[0.989966555183946,"#F7E629"],[0.993311036789298,"#F9E627"],[0.996655518394649,"#FBE726"],[1,"#FDE725"]],"colorbar":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.71796707229778,"thickness":7.55905511811024,"title":"Average Sentiment","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352},"tickmode":"array","ticktext":["-5","0","5"],"tickvals":[0.229885057471264,0.574712643678161,0.919540229885057],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":10.6268161062682},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":41.2386882523869,"r":6.6417600664176,"b":36.5296803652968,"l":33.8729763387298},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352},"title":{"text":"Avrage Sentiment Values Across Episdoes By Seasons","font":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022},"x":0.5,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,25.5],"tickmode":"array","ticktext":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],"categoryorder":"array","categoryarray":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.3208800332088,"tickwidth":0.603796369674327,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.6268161062682},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.603796369674327,"zeroline":false,"anchor":"y","title":{"text":"Episode","font":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,10.5],"tickmode":"array","ticktext":["1","2","3","4","5","6","7","8","9","10"],"tickvals":[1,2,3,4,5,6,7,8,9,10],"categoryorder":"array","categoryarray":["1","2","3","4","5","6","7","8","9","10"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.3208800332088,"tickwidth":0.603796369674327,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.6268161062682},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.603796369674327,"zeroline":false,"anchor":"x","title":{"text":"Season","font":{"color":"rgba(0,0,0,1)","family":"","size":13.2835201328352}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.71796707229778,"font":{"color":"rgba(0,0,0,1)","family":"","size":10.6268161062682}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"10c4e3a3c64":{"x":{},"y":{},"fill":{},"type":"heatmap"}},"cur_data":"10c4e3a3c64","visdat":{"10c4e3a3c64":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>We can also animate the movement of sentiments over episodes and season for each character</p>
<pre class="r"><code>library(gganimate)

plot1 &lt;- sentimentScript %&gt;%
  ggplot(aes(episode, sentiment, color = actor)) + 
  geom_point() + 
  facet_wrap(~actor) +
  scale_x_continuous(expand = c(0,0), breaks = seq(1, 25, 2)) +
  labs(title = &quot;Season: {frame_time}&quot;,
       x = &quot;Episode&quot;,
       y = &quot;Average Sentiment For Episode&quot;, 
       color = &quot;Actor&quot;) +
  transition_time(season) +
  ease_aes(&quot;linear&quot;) +
  theme(plot.title = element_text(hjust = 0.5))

animate(plot1, fps=5, end_pause = 30)</code></pre>
<p><img src="/post/Rating_and_sentiment_analysis_for_Friends_files/figure-html/unnamed-chunk-18-1.gif" /><!-- --></p>
<p>Thank you for reading!</p>
